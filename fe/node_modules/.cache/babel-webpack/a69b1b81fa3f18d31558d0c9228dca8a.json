{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/rotem.levi/Downloads/CakesShoppingOnline_/CakesShoppingOnline_/fe/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as d3 from 'd3';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../../../../directives/highlight.directive\";\nexport class BarComponent {\n  constructor(http) {\n    this.http = http;\n    this.data = [];\n    this.margin = 50;\n    this.width = 750 - this.margin * 2;\n    this.height = 400 - this.margin * 2;\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        _this.data = yield _this.http.get(environment.categoriesUrl + \"products/agg-supllier\").toPromise();\n      } catch (err) {\n        alert(err.message);\n      } // this.data = await this.http.get<any[]>(environment.categoriesUrl + \"products/agg-supllier\").toPromise();\n\n\n      console.log(\"this is data from bar component\");\n      console.log(_this.data);\n\n      _this.createSvg();\n\n      _this.drawBars(_this.data);\n    })();\n  }\n\n  createSvg() {\n    this.svg = d3.select(\"figure#bar\").append(\"svg\").attr(\"width\", this.width + this.margin * 2).attr(\"height\", this.height + this.margin * 2).append(\"g\").attr(\"transform\", \"translate(\" + this.margin + \",\" + this.margin + \")\");\n  }\n\n  drawBars(data) {\n    // Create the X-axis band scale\n    const x = d3.scaleBand().range([0, this.width]).domain(data.map(d => d.name)).padding(0.2); // Draw the X-axis on the DOM\n\n    this.svg.append(\"g\").attr(\"transform\", \"translate(0,\" + this.height + \")\").call(d3.axisBottom(x)).selectAll(\"text\").attr(\"transform\", \"translate(-40,0)rotate(0)\").style(\"font-size\", \"20px\").style(\"text-anchor\", \"end\"); // Create the Y-axis band scale\n\n    const y = d3.scaleLinear().domain([0, 100]).range([this.height, 0]); // Draw the Y-axis on the DOM\n\n    this.svg.append(\"g\").style(\"font-size\", \"20px\").attr(\"transform\", \"translate(-40,0)rotate(0)\").call(d3.axisLeft(y)); // Create and fill the bars\n\n    this.svg.selectAll(\"bars\").data(data).enter().append(\"rect\").attr(\"x\", d => x(d.name)).attr(\"y\", d => y(d.count)).attr(\"width\", x.bandwidth()).attr(\"height\", d => this.height - y(d.count)).attr(\"fill\", \"#d04a35\");\n  }\n\n}\n\nBarComponent.ɵfac = function BarComponent_Factory(t) {\n  return new (t || BarComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n};\n\nBarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: BarComponent,\n  selectors: [[\"app-bar\"]],\n  decls: 6,\n  vars: 0,\n  consts: [[\"appHighlight\", \"\"], [\"id\", \"bar\", \"appHighlight\", \"\"]],\n  template: function BarComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\");\n      i0.ɵɵelementStart(1, \"h2\", 0);\n      i0.ɵɵtext(2, \"Products by supplier\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"h5\");\n      i0.ɵɵtext(4, \"D3.js Bar Chart - Data brought by Group By mondoDb Query\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(5, \"figure\", 1);\n      i0.ɵɵelementEnd();\n    }\n  },\n  directives: [i2.HighlightDirective],\n  styles: [\"app-bar[_ngcontent-%COMP%] {\\r\\n    font-size: 40px;\\r\\n\\r\\n}\\r\\n\\r\\ndiv[_ngcontent-%COMP%] {\\r\\n    display: inline-block;\\r\\n\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhci5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksZUFBZTs7QUFFbkI7O0FBRUE7SUFDSSxxQkFBcUI7O0FBRXpCIiwiZmlsZSI6ImJhci5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiYXBwLWJhciB7XHJcbiAgICBmb250LXNpemU6IDQwcHg7XHJcblxyXG59XHJcblxyXG5kaXYge1xyXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG5cclxufSJdfQ== */\"]\n});","map":{"version":3,"sources":["C:/Users/rotem.levi/Downloads/CakesShoppingOnline_/CakesShoppingOnline_/fe/src/app/components/admin-area/graphs/bar/bar.component.ts"],"names":["d3","environment","i0","i1","i2","BarComponent","constructor","http","data","margin","width","height","ngOnInit","get","categoriesUrl","toPromise","err","alert","message","console","log","createSvg","drawBars","svg","select","append","attr","x","scaleBand","range","domain","map","d","name","padding","call","axisBottom","selectAll","style","y","scaleLinear","axisLeft","enter","count","bandwidth","ɵfac","BarComponent_Factory","t","ɵɵdirectiveInject","HttpClient","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","BarComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","directives","HighlightDirective","styles"],"mappings":"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","sourcesContent":["import * as d3 from 'd3';\r\nimport { environment } from 'src/environments/environment';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/common/http\";\r\nimport * as i2 from \"../../../../directives/highlight.directive\";\r\nexport class BarComponent {\r\n    constructor(http) {\r\n        this.http = http;\r\n        this.data = [];\r\n        this.margin = 50;\r\n        this.width = 750 - (this.margin * 2);\r\n        this.height = 400 - (this.margin * 2);\r\n    }\r\n    async ngOnInit() {\r\n        try {\r\n            this.data = await this.http.get(environment.categoriesUrl + \"products/agg-supllier\").toPromise();\r\n        }\r\n        catch (err) {\r\n            alert(err.message);\r\n        }\r\n        // this.data = await this.http.get<any[]>(environment.categoriesUrl + \"products/agg-supllier\").toPromise();\r\n        console.log(\"this is data from bar component\");\r\n        console.log(this.data);\r\n        this.createSvg();\r\n        this.drawBars(this.data);\r\n    }\r\n    createSvg() {\r\n        this.svg = d3.select(\"figure#bar\")\r\n            .append(\"svg\")\r\n            .attr(\"width\", this.width + (this.margin * 2))\r\n            .attr(\"height\", this.height + (this.margin * 2))\r\n            .append(\"g\")\r\n            .attr(\"transform\", \"translate(\" + this.margin + \",\" + this.margin + \")\");\r\n    }\r\n    drawBars(data) {\r\n        // Create the X-axis band scale\r\n        const x = d3.scaleBand()\r\n            .range([0, this.width])\r\n            .domain(data.map(d => d.name))\r\n            .padding(0.2);\r\n        // Draw the X-axis on the DOM\r\n        this.svg.append(\"g\")\r\n            .attr(\"transform\", \"translate(0,\" + this.height + \")\")\r\n            .call(d3.axisBottom(x))\r\n            .selectAll(\"text\")\r\n            .attr(\"transform\", \"translate(-40,0)rotate(0)\")\r\n            .style(\"font-size\", \"20px\")\r\n            .style(\"text-anchor\", \"end\");\r\n        // Create the Y-axis band scale\r\n        const y = d3.scaleLinear()\r\n            .domain([0, 100])\r\n            .range([this.height, 0]);\r\n        // Draw the Y-axis on the DOM\r\n        this.svg.append(\"g\")\r\n            .style(\"font-size\", \"20px\")\r\n            .attr(\"transform\", \"translate(-40,0)rotate(0)\")\r\n            .call(d3.axisLeft(y));\r\n        // Create and fill the bars\r\n        this.svg.selectAll(\"bars\")\r\n            .data(data)\r\n            .enter()\r\n            .append(\"rect\")\r\n            .attr(\"x\", (d) => x(d.name))\r\n            .attr(\"y\", (d) => y(d.count))\r\n            .attr(\"width\", x.bandwidth())\r\n            .attr(\"height\", (d) => this.height - y(d.count))\r\n            .attr(\"fill\", \"#d04a35\");\r\n    }\r\n}\r\nBarComponent.ɵfac = function BarComponent_Factory(t) { return new (t || BarComponent)(i0.ɵɵdirectiveInject(i1.HttpClient)); };\r\nBarComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: BarComponent, selectors: [[\"app-bar\"]], decls: 6, vars: 0, consts: [[\"appHighlight\", \"\"], [\"id\", \"bar\", \"appHighlight\", \"\"]], template: function BarComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\");\r\n        i0.ɵɵelementStart(1, \"h2\", 0);\r\n        i0.ɵɵtext(2, \"Products by supplier\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(3, \"h5\");\r\n        i0.ɵɵtext(4, \"D3.js Bar Chart - Data brought by Group By mondoDb Query\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(5, \"figure\", 1);\r\n        i0.ɵɵelementEnd();\r\n    } }, directives: [i2.HighlightDirective], styles: [\"app-bar[_ngcontent-%COMP%] {\\r\\n    font-size: 40px;\\r\\n\\r\\n}\\r\\n\\r\\ndiv[_ngcontent-%COMP%] {\\r\\n    display: inline-block;\\r\\n\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhci5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksZUFBZTs7QUFFbkI7O0FBRUE7SUFDSSxxQkFBcUI7O0FBRXpCIiwiZmlsZSI6ImJhci5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiYXBwLWJhciB7XHJcbiAgICBmb250LXNpemU6IDQwcHg7XHJcblxyXG59XHJcblxyXG5kaXYge1xyXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG5cclxufSJdfQ== */\"] });\r\n"]},"metadata":{},"sourceType":"module"}